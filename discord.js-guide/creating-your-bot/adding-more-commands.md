# Добавление дополнительных команд

Бот, не имеющий ничего, кроме одной команды, был бы действительно скучным, и у вас, вероятно, уже есть куча командных идей, витающих в вашей голове, верно? Итак, начнем.

Вот как должно сейчас выглядеть ваше сообщение:

```js
client.on('message', message => {
	if (message.content === '!ping') {
		message.channel.send('Pong.');
	}
});
```

Прежде чем делать что-либо еще, создайте свойство для хранения настроенного префикса. Вместо этого `const config = ...` вы можете использовать деструктуризацию для извлечения переменной префикса из файла конфигурации, а также токена, пока вы на нем.

```diff
- const config = require('./config.json');
+ const { prefix, token } = require('./config.json');
```

```diff
- client.login(config.token);
+ client.login(token);
```

С этого момента, если вы измените префикс или токен в файле `config.json`, он изменится и в файле бота. Скоро вы будете часто использовать префиксную переменную.

## Простая структура команд

У вас уже есть оператор if, который проверяет сообщения на наличие команды ping / pong. Так же просто добавить другие проверки команд; просто привяжите `else if` к существующему состоянию.

```js
if (message.content === `${prefix}ping`) {
	message.channel.send('Pong.');
} else if (message.content === `${prefix}beep`) {
	message.channel.send('Boop.');
}
```

С этим есть несколько потенциальных проблем. Например, команда ping не будет работать, если вы отправите `!ping test`. Будет только совпадение `!ping` и больше ничего. То же самое и с другой командой. Если вы хотите, чтобы ваши команды были более гибкими, вы можете сделать следующее:

```js
if (message.content.startsWith(`${prefix}ping`)) {
	message.channel.send('Pong.');
} else if (message.content.startsWith(`${prefix}beep`)) {
	message.channel.send('Boop.');
}
```

Теперь команда ping будет срабатывать всякий раз, когда сообщение *начинается с* `!ping`! Иногда это именно то, что вам нужно, но в других случаях вам может потребоваться только точное совпадение `!ping` - это варьируется от случая к случаю, поэтому помните о том, что вам нужно при создании команд.

> Имейте в виду , что это также будет соответствовать `!pingpong`, `!pinguin` и тому подобное. На данный момент это не большая проблема, так что не волнуйтесь; позже вы увидите более эффективные способы проверки команд

## Отображение реальных данных

Начнем отображать реальные данные. На данный момент мы будем отображать базовую информацию об участнике / сервере.

### Команда информации о сервере

Сделайте еще один оператор if для проверки команд, использующих в `server` качестве имени команды. Вы уже взаимодействовали с объектом сообщения через `message.channel.send()`. Вы получаете объект сообщения, получаете доступ к каналу, по которому оно было отправлено, и отправляете ему сообщение. Точно так же, как как `message.channel` дает вам канал сообщения , `message.guild` дает вам сервер сообщения.

> Серверы называются «гильдиями» в Discord API и библиотеке discord.js. Когда вы видите, что кто-то говорит «гильдия», они имеют в виду сервер.

```js
else if (message.content === `${prefix}server`) {
	message.channel.send(`This server's name is: ${message.guild.name}`);
}
```

Если вы хотите расширить эту команду и добавить дополнительную информацию, вот пример того, что вы можете сделать:

```js
else if (message.content === `${prefix}server`) {
	message.channel.send(`Server name: ${message.guild.name}\nTotal members: ${message.guild.memberCount}`);
}
```

Вы, конечно, можете изменить это по своему вкусу. Вы также можете отобразить дату создания сервера или регион сервера. Вы бы сделали это таким же образом - используйте `message.guild.createdAt` или `message.guild.region`, соответственно.

### Информационная команда участника

Настройте другой оператор if и используйте имя команды `user-info`.

```js
else if (message.content === `${prefix}user-info`) {
	message.channel.send(`Your username: ${message.author.username}\nYour ID: ${message.author.id}`);
}
```

Это отобразит имя пользователя автора сообщения (не псевдоним, если он установлен), а также его идентификатор пользователя.

И вот оно! Как видите, добавить дополнительные команды довольно просто.

## Проблема с `if`/`else if`

Если вы не планируете делать более 7 или 8 команд для своего бота, то использование цепочки if / else if вполне подойдет; По-видимому, это небольшой проект на тот момент, поэтому вам не нужно тратить на него слишком много времени. Однако для большинства из нас это не так.

Вы, наверное, хотите, чтобы ваш бот был многофункциональным, простым в настройке и разработке, верно? Использование гигантской цепочки if / else if не позволит вам добиться этого и только затруднит процесс разработки. После того, как вы прочитаете о создании аргументов, мы сразу перейдем к так называемому «обработчику команд» - коду, который упрощает обработку команд и делает их намного более эффективной.

Прежде чем продолжить, вот небольшой список причин, по которым вы не должны использовать цепочки if / else if для чего-либо, кроме небольшого проекта:

- Требуется больше времени, чтобы найти нужный фрагмент кода.
- Легче стать жертвой спагетти-кода.
- Сложно поддерживать по мере роста.
- Сложно отлаживать.
- Сложно организовать.
- Общая плохая практика.

Короче говоря, это просто не лучшая идея. Но это то, для чего это руководство! Прочтите следующие несколько страниц, чтобы предотвратить эти проблемы до того, как они возникнут, попутно узнавая что-то новое.