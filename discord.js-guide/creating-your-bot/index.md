# Подготовка и запуск вашего бота

Наконец-то мы подошли к захватывающим моментам! Поскольку ваш бот сейчас находится на вашем сервере, следующим шагом будет начать кодирование и разместить его в сети!

## Создание файла бота

Откройте предпочтительный редактор кода и создайте новый файл.

Рекомендуется сохранить файл как `index.js`, но вы можете называть его как хотите, если он заканчивается на `.js`.

## Вход в Discord

Создав новый файл, быстро проверьте, все ли у вас настроено правильно. Скопируйте и вставьте следующий код в свой файл и сохраните его. Не волнуйтесь, если вы не поймете это сразу - это будет объяснено немного подробнее после этого.

```js
const Discord = require('discord.js');
const client = new Discord.Client();

client.once('ready', () => {
	console.log('Ready!');
});

client.login('Сюда ваш токен');
```

Вернитесь в окно консоли, введите `node your-file-name.js` и нажмите ввод. Если вы видите `Ready!` сообщение через несколько секунд, все готово! Если нет, попробуйте вернуться на несколько шагов назад и убедитесь, что вы все выполнили правильно.

> Не хочется каждый раз вводить имя файла? Откройте `package.json` файл, найдите что-то вроде `"main": "index.js"` и измените `"index.js"` имя файла на другое. После сохранения вы можете просто запустить `node .` ярлык в консоли, чтобы начать процесс!

### Пояснение кода запуска

Вот тот же код с комментариями, чтобы было легче понять, что происходит.

```js
// Подключение библиотеки discord.js
const Discord = require('discord.js');

// Создания нового клиента
const client = new Discord.Client();

// Если клиент готов к работе, то срабатывает этот код
// Это событие срабатывает только когда клиент готов
client.once('ready', () => {
	console.log('Ready!');
});

// Вход в discord при помощи токена
client.login('your-token-goes-here');
```

Хотя это немного, хорошо знать, что делает каждый бит вашего кода. Но в нынешнем виде это ничего не даст. Вероятно, вы захотите добавить несколько команд, которые запускаются всякий раз, когда кто-то отправляет конкретное сообщение, верно? Тогда приступим к делу!

## Прослушивание сообщений

Во-первых, обязательно закройте процесс в консоли. Вы можете сделать это, нажав `Ctrl + C` внутри консоли. Вернитесь в редактор кода и добавьте следующий фрагмент кода над `client.login()` строкой.

```js
client.on('message', message => {
	console.log(message.content);
});
```

Обратите внимание, как используется код, `.on`, а не `.once` как в событии готовности. Это означает, что он может срабатывать несколько раз. Сохраните файл, вернитесь на консоль и снова запустите процесс. Всякий раз, когда сообщение отправляется внутри канала, к которому у вашего бота есть доступ, его содержимое записывается на вашу консоль. Давай, попробуй!

> Внутри консоли вы можете нажать стрелку вверх на клавиатуре, чтобы вызвать последние запущенные вами команды. Нажатие, `Up`, а затем `Enter` после закрытия процесса - хороший и быстрый способ снова запустить его (в отличие от ввода имени каждый раз).

## Ответ на сообщения

Вход в консоль - это здорово и все такое, но на самом деле это не дает никакой обратной связи для конечного пользователя. Давайте создадим базовую команду ping / pong, прежде чем переходить к созданию настоящих команд. Удалите `console.log(message.content)` строку из своего кода и замените ее следующим:

```js
if (message.content === '!ping') {
	//Отправляет "Pong." в канал сообщения
	message.channel.send('Pong.');
}
```

Перезапустите своего бота, а затем отправьте `!ping` его на канал, к которому у него есть доступ.

Вы успешно создали свою первую команду бота Discord! Интересный материал, не правда ли? Это только начало, давайте перейдем к созданию еще нескольких команд.